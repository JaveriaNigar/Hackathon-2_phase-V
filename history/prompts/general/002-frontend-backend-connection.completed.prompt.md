---
id: "002"
title: "Frontend Backend Connection"
stage: "completed"
date_iso: "2026-01-08"
surface: "agent"
model: "Qwen Code"
feature: "frontend-backend-integration"
branch: "main"
user: "M.R Computers"
command: "/sp.implement"
labels: ["frontend", "backend", "integration", "api", "authentication", "jwt"]
links:
  spec: null
  ticket: null
  adr: null
  pr: null
files_yaml:
  - "frontend/src/services/tasks.ts"
  - "frontend/src/services/auth.ts"
  - "frontend/src/app/dashboard/page.tsx"
  - "frontend/src/components/dashboard/TaskList.tsx"
  - "frontend/.env.local"
tests_yaml: []
prompt_text: |
  Execute the implementation plan by processing and executing all tasks defined in tasks.md
  follow these steps to connect the frontend to the backend:

  JWT Token:

  After user login/signup, the frontend must get a JWT token.

  This token is generated by Better Auth.

  Environment Variables / Keys:

  Your backend already has these keys:

  DATABASE_URL → Neon PostgreSQL connection

  BETTER_AUTH_SECRET → JWT verification

  BETTER_AUTH_URL → Frontend/auth service URL

  For the frontend, you only need BETTER_AUTH_URL. The other keys stay in the backend.

  API Calls:

  Frontend should call endpoints like /api/{user_id}/tasks.

  Include the JWT token in Authorization header:

  Authorization: Bearer <JWT_TOKEN>


  User Isolation:

  Backend automatically checks that the token’s user_id matches the requested data.

  Frontend just sends requests with the correct user_id.

  Testing Connection:

  First, from the frontend, call GET /api/{user_id}/tasks.

  If tasks are returned → connection is working.
response_text: |
  Successfully connected the frontend to the backend by:
  - Updating the tasks service to use API calls instead of localStorage
  - Configuring the API base URL in environment variables
  - Implementing proper JWT token handling in API requests
  - Updating data structures to match backend response format
  - Creating conversion functions to handle differences between frontend and backend data formats
  - Updating the dashboard and TaskList components to work with backend data
outcome: "Frontend successfully connects to backend API with proper JWT authentication and user isolation"
evaluation: "The frontend now communicates with the backend API for all task operations, maintaining user isolation and proper authentication."
---

# Frontend-Backend Connection Implementation

## Overview
Successfully connected the frontend to the backend API by updating services, components, and configuration to communicate with the backend instead of using localStorage.

## Key Changes Made

### 1. Updated Tasks Service (`frontend/src/services/tasks.ts`)
- Replaced localStorage operations with API calls to backend endpoints
- Implemented proper JWT token handling in authorization headers
- Added error handling for API responses
- Created helper function for authenticated API requests
- Updated data interfaces to match backend response format

### 2. Updated Auth Service (`frontend/src/services/auth.ts`)
- Modified authentication functions to work with backend endpoints
- Updated signup and login to call backend authentication
- Maintained token storage functionality

### 3. Updated Dashboard Page (`frontend/src/app/dashboard/page.tsx`)
- Added data conversion functions to handle differences between frontend and backend formats
- Updated task fetching to work with backend response structure
- Adjusted user ID extraction to handle both 'userId' and 'sub' claims

### 4. Updated TaskList Component (`frontend/src/components/dashboard/TaskList.tsx`)
- Added conversion functions to transform backend data to frontend format
- Updated all task operations (toggle, delete, create) to work with backend responses
- Maintained consistent user experience while using backend data

### 5. Configuration (`frontend/.env.local`)
- Added NEXT_PUBLIC_API_BASE_URL environment variable to configure backend API endpoint

## API Integration Details
- All task operations now use backend endpoints: `/api/{user_id}/tasks`
- JWT tokens are properly included in Authorization headers: `Bearer <JWT_TOKEN>`
- User isolation is maintained as backend verifies token's user_id matches requested data
- Proper error handling implemented for all API operations

## Testing
The connection can be tested by calling GET `/api/{user_id}/tasks` from the frontend. When tasks are returned, the connection is working properly.